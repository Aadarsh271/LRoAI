


# ---------------------
# Infrastructure target
# ---------------------

lroai_infrastructure_1 = {
    value = 0.60
}

lroai_infrastructure_2 = {
    value = 0.70
}

lroai_infrastructure_3 = {
    value = 0.80
}

lroai_infrastructure_4 = {
    value = 0.90
}

lroai_infrastructure_5 = {
    value = 1.00
}

lroai_infrastructure_6 = {
    value = 1.10
}

lroai_infrastructure_7 = {
    value = 1.20
}

# -------------
# Convoy target
# -------------

lroai_building_port_spending_share = {
    value = 0.10
}

lroai_building_port_spending_target = {
    value = lroai_country_active_income
    multiply = lroai_building_port_spending_share
}

lroai_building_port_spending_paucity = {
    value = lroai_building_port_spending_target
    multiply = 0.80
}

lroai_building_port_spending_floor = {
    value = lroai_building_port_spending_target
    multiply = 0.60
}

lroai_building_port_spending_ceiling = {
    value = lroai_building_port_spending_target
    multiply = 1.40
}

lroai_building_port_spending_excess = {
    value = lroai_building_port_spending_target
    multiply = 1.20
}

lroai_building_port_spending_value = {
    if = {
        limit = {
            has_variable = lroai_building_port_spending
            var:lroai_building_port_spending > 0
        }
        value = var:lroai_building_port_spending
        floor = yes
        divide = {
            value = var:lroai_building_port_spending
            subtract = {
                value = var:lroai_building_port_spending
                floor = yes
            }
            multiply = 100
        }
    }
    else = {
        value = lroai_country_active_income
        multiply = lroai_building_port_spending_share
        multiply = 1.10
    }
    min = 0
    max = 1000000000 #billion
}

lroai_building_port_spending_expected = {
    value = lroai_building_port_spending_value
    add = {
        if = {
            limit = {
                lroai_building_port_spending_value > 0
                has_variable = lroai_building_port_total
                var:lroai_building_port_total > 0
            }
            value = lroai_building_port_spending_value
            divide = var:lroai_building_port_total
        }
        else = {
            value = 1000
        }
        multiply = lroai_construction_limit_3_6
    }
}

lroai_ports_on_market_capital_coastline = {
    value = 1
    if = {
        limit = {
            has_variable = lroai_num_states_of_market_capital_coastline
        }
        add = {
            value = var:lroai_num_states_of_market_capital_coastline
            divide = 6
            floor = yes
        }
    }
}

lroai_convoys_5 = {
    value = lroai_convoys_target
    divide = 2.80
}

lroai_convoys_6 = {
    value = lroai_convoys_target
    divide = 2.20
}

lroai_convoys_7 = {
    value = lroai_convoys_target
    divide = 1.60
}

lroai_convoys_8 = {
    value = lroai_convoys_target
}

lroai_convoys_9 = {
    value = lroai_convoys_target
    multiply = 1.05
}

lroai_convoys_10 = {
    value = lroai_convoys_target
    multiply = 1.10
}

lroai_convoys_11 = {
    value = lroai_convoys_target
    multiply = 1.15
}

lroai_convoys_12 = {
    value = lroai_convoys_target
    multiply = 1.20
}

lroai_convoys_target = {
    value = lroai_minus_half_unincorporated_population
    divide = 1000000
    multiply = 500
    if = {
        limit = {
            has_law = law_type:law_isolationism
        }
        multiply = 0.10
    }
    multiply = lroai_target_minus_half_unincorporated_gdp_per_capita_scaling
}

lroai_convoys_paucity = {
    value = lroai_convoys_target
    multiply = 0.80
}

lroai_convoys_floor = {
    value = lroai_convoys_target
    multiply = 0.60
}

lroai_convoys_excess = {
    value = lroai_convoys_target
    multiply = 1.1666
    multiply = 1.20
    min = {
        value = lroai_convoys_target
        add = {
            if = {
                limit = {
                    has_technology_researched = concrete_dockyards
                }
                value = 500
            }
            else_if = {
                limit = {
                    has_technology_researched = gantry_cranes
                }
                value = 350
            }
            else = {
                value = 200
            }
            multiply = 1.20
        }
    }
}

lroai_convoys_ceiling = {
    value = lroai_convoys_target
    multiply = 1.1428
    multiply = 1.40
    min = {
        value = lroai_convoys_target
        add = {
            if = {
                limit = {
                    has_technology_researched = concrete_dockyards
                }
                value = 500
            }
            else_if = {
                limit = {
                    has_technology_researched = gantry_cranes
                }
                value = 350
            }
            else = {
                value = 200
            }
            multiply = 1.40
        }
    }
}

lroai_convoys_current = {
    value = modifier:country_convoys_capacity_add
    multiply = {
        value = modifier:country_convoys_capacity_mult
        add = 1
    }
}



lroai_total_convoy_produced_value = {
     value = root.num_convoys_available
}

lroai_total_convoy_required_value = {
    value =  root.num_convoys_required
}

lroai_total_convoy_available_value = {
    value = lroai_total_convoy_produced_value
    subtract = lroai_total_convoy_required_value
}

lroai_total_convoy_available_value_ceiling_critical = {
    value =  lroai_total_convoy_required_value
    add =  200
}

lroai_total_convoy_available_value_ceiling_high = {
    value =  lroai_total_convoy_required_value
    multiply = 1.1
    add = 300
}

lroai_total_convoy_available_value_ceiling_medium = {
    value =  lroai_total_convoy_required_value
    multiply = 1.15
    add = 400
}

lroai_total_convoy_available_value_ceiling_low = {
    value =  lroai_total_convoy_required_value
    multiply = 1.2
    add = 400
}

lroai_total_convoy_available_value_downsize = {
    value =  lroai_total_convoy_required_value
    multiply = 1.4
    add = 400
}
