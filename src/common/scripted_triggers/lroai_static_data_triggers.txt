# -------------------------
# Government administration
# -------------------------

lroai_consider_building_government_administration = {
    has_technology_researched = tech_bureaucracy
    lroai_building_is_allowed = {
        critical = 1 # Can be constructed as critical, 1 is id of building type
    }
    lroai_consider_building = {
        id = $id$
        shortage = 0
    }
    OR = {
        bureaucracy < lroai_bureaucracy_1
        AND = {
            trigger_if = {
                limit = {
                    lroai_are_military_expenses_higher_than_usual = no
                }
                OR = {
                    lroai_budget_health_is_equal_or_higher = {
                        level = -1
                    }
                    lroai_tax_level_equal_or_lower = {
                        value = 3
                    }
                }
            }
            trigger_else = {
                OR = {
                    lroai_budget_health_is_equal_or_higher = {
                        level = 0
                    }
                    lroai_tax_level_equal_or_lower = {
                        value = 2
                    }
                }
            }
            lroai_building_government_administration_spending_value < lroai_building_government_administration_spending_target
            lroai_building_government_administration_spending_expected < lroai_building_government_administration_spending_excess
        }
    }
    bureaucracy < lroai_bureaucracy_ceiling
    OR = {
        is_player = no
    }
}

lroai_evaluate_building_government_administration = {
    trigger_if = {
        limit = {
            $priority$ >= 1
            $priority$ <= 10
            OR = {
                NOT = {
                    has_variable = lroai_building_government_administration_cooldown
                }
                NOR = {
                    $priority$ > 1
                    lroai_building_government_administration_spending_expected > lroai_building_government_administration_spending_target
                }
            }
        }
        switch = {
            trigger = $priority$
            1 = {
                bureaucracy < lroai_bureaucracy_1
            }
            2 = {
                OR = {
                    bureaucracy < lroai_bureaucracy_2
                    lroai_country_lost_taxes > lroai_country_lost_taxes_2
                }
            }
            3 = {
                OR = {
                    bureaucracy < lroai_bureaucracy_3
                    lroai_country_lost_taxes > lroai_country_lost_taxes_3
                }
            }
            4 = {
                OR = {
                    bureaucracy < lroai_bureaucracy_4
                    lroai_country_lost_taxes > lroai_country_lost_taxes_4
                }
            }
            5 = {
                OR = {
                    bureaucracy < lroai_bureaucracy_5
                    lroai_country_lost_taxes > lroai_country_lost_taxes_5
                }
            }
            6 = {
                OR = {
                    bureaucracy < lroai_bureaucracy_6
                    lroai_country_lost_taxes > lroai_country_lost_taxes_6
                }
            }
            7 = {
                OR = {
                    bureaucracy < lroai_bureaucracy_7
                    lroai_country_lost_taxes > lroai_country_lost_taxes_7
                }
            }
            8 = {
                OR = {
                    bureaucracy < lroai_bureaucracy_8
                    lroai_country_lost_taxes > lroai_country_lost_taxes_8
                }
            }
            9 = {
                bureaucracy < lroai_bureaucracy_9
            }
            10 = {
                bureaucracy < lroai_bureaucracy_10
            }
            fallback = {
                always = no
            }
        }
    }
    trigger_else = {
        always = no
    }
}

lroai_sanction_building_government_administration = {
    lroai_sanction_government = {
        key = building_government_administration
        conditions = 0
        shortage = 0
        profitable = 0
    }
    OR = {
        always = yes
        $id$ = 0
    }
}

lroai_allocate_building_government_administration = {
    switch = {
        trigger = $aptitude$
        1 = {
            is_incorporated = yes
            lroai_tax_capacity_balance_percent < 1
            save_temporary_scope_as = lroai_current_state
            root = {
                any_scope_state = {
                    lroai_taxes_lost_due_to_tax_capacity > scope:lroai_current_state.lroai_taxes_lost_due_to_tax_capacity
                    percent < 0.10
                }
            }
        }
        2 = {
            is_incorporated = yes
            lroai_tax_capacity_balance_percent < 1
            save_temporary_scope_as = lroai_current_state
            root = {
                any_scope_state = {
                    lroai_taxes_lost_due_to_tax_capacity > scope:lroai_current_state.lroai_taxes_lost_due_to_tax_capacity
                    percent < 0.50
                }
            }
        }
        3 = {
            is_incorporated = yes
            lroai_tax_capacity_balance_percent < 1
            save_temporary_scope_as = lroai_current_state
            root = {
                any_scope_state = {
                    lroai_taxes_lost_due_to_tax_capacity > scope:lroai_current_state.lroai_taxes_lost_due_to_tax_capacity
                    percent >= 0.50
                }
            }
        }
        4 = {
            OR = {
                is_incorporated = no
                lroai_tax_capacity_balance_percent >= 1
            }
        }
        fallback = {
            always = no
        }
    }
}

# ----------
# University
# ----------

lroai_consider_building_university = {
    has_technology_researched = academia
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
    trigger_if = {
        limit = {
            lroai_innovation_current < lroai_innovation_target
            lroai_building_university_total < lroai_building_university_target
        }
        trigger_if = {
            limit = {
                lroai_are_military_expenses_higher_than_usual = no
            }
            OR = {
                lroai_budget_health_is_equal_or_higher = {
                    level = -1
                }
                lroai_tax_level_equal_or_lower = {
                    value = 3
                }
            }
        }
        trigger_else = {
            OR = {
                lroai_budget_health_is_equal_or_higher = {
                    level = 0
                }
                lroai_tax_level_equal_or_lower = {
                    value = 2
                }
            }
        }
    }
    trigger_else = {
        OR = {
            lroai_budget_health_is_equal_or_higher = {
                level = 0
            }
            lroai_tax_level_equal_or_lower = {
                value = 2
            }
        }
    }
    lroai_building_university_spending_value < lroai_building_university_spending_target
    lroai_building_university_spending_expected < lroai_building_university_spending_excess
    OR = {
        is_player = no
    }
}

lroai_evaluate_building_university = {
    trigger_if = {
        limit = {
            $priority$ >= 5
            $priority$ <= 12
            OR = {
                NOT = {
                    has_variable = lroai_building_university_cooldown
                }
                NOR = {
                    $priority$ > 5
                    lroai_building_university_spending_expected > lroai_building_university_spending_target
                }
            }
        }
        OR = {
            $priority$ > 7
            AND = {
                lroai_innovation_current < lroai_innovation_8
                lroai_building_university_total < lroai_building_university_8
            }
        }
        switch = {
            trigger = $priority$
            5 = {
                OR = {
                    lroai_innovation_current < lroai_innovation_5
                    lroai_building_university_total < lroai_building_university_5
                }
            }
            6 = {
                OR = {
                    lroai_innovation_current < lroai_innovation_6
                    lroai_building_university_total < lroai_building_university_6
                }
            }
            7 = {
                OR = {
                    lroai_innovation_current < lroai_innovation_7
                    lroai_building_university_total < lroai_building_university_7
                }
            }
            8 = {
                lroai_innovation_current < lroai_innovation_8
                lroai_building_university_total < lroai_building_university_8
            }
            9 = {
                lroai_innovation_current < lroai_innovation_9
                lroai_building_university_total < lroai_building_university_9
            }
            10 = {
                lroai_innovation_current < lroai_innovation_10
                lroai_building_university_total < lroai_building_university_10
            }
            11 = {
                lroai_innovation_current < lroai_innovation_11
                lroai_building_university_total < lroai_building_university_10
            }
            12 = {
                lroai_innovation_current < lroai_innovation_12
                lroai_building_university_total < lroai_building_university_10
            }
            fallback = {
                always = yes
            }
        }
    }
    trigger_else = {
        always = no
    }
}

lroai_sanction_building_university = {
    lroai_sanction_government = {
        key = building_university 
        conditions = 0
        shortage = 1
        profitable = 0
    }
    OR = {
        always = yes
        $id$ = 0
    }
}

lroai_allocate_building_university = {
    $aptitude$ = 1
}

# -------------------
# Construction sector
# -------------------

lroai_consider_building_construction_sector = {
    has_technology_researched = urbanization
    lroai_building_is_allowed = {
        critical = 3 # Can be constructed as critical, 3 is id of building type
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
   lroai_current_constructions_points_percent_of_max_wanted < 1.1
    OR = {
        is_player = no
    }
}

lroai_evaluate_building_construction_sector = {
    trigger_if = {
        limit = {
            $priority$ >= 1
            $priority$ <= 8
        }
        switch = {
            trigger = $priority$
            1 = {
                lroai_current_constructions_points_percent_of_max_wanted < 0.6
            }
            2 = {
                lroai_current_constructions_points_percent_of_max_wanted < 0.7
            }
            3 = {
                lroai_current_constructions_points_percent_of_max_wanted < 0.8
            }
            4 = {
                lroai_current_constructions_points_percent_of_max_wanted < 0.9
            }
            5 = {
                lroai_current_constructions_points_percent_of_max_wanted >= 0.9
            }
            fallback = {
                always = no
            }
        }
    }
    trigger_else = {
        always = no
    }
}

lroai_sanction_building_construction_sector = {
    var:lroai_building_construction_sector_level < lroai_state_construction_sector_limit
    lroai_sanction_government = {
        key = building_construction_sector 
        conditions = 0
        shortage = 1
        profitable = 0
    }
    OR = {
        always = yes
        $id$ = 0
    }
}

lroai_allocate_building_construction_sector = {
    $aptitude$ = 1
}

# -------
# Railway
# -------

lroai_consider_building_railway = {
    has_technology_researched = railways
    lroai_building_is_allowed = {
        critical = 0
    }
    OR = {
        lroai_budget_health_is_equal_or_higher = {
            level = -2
        }
        lroai_tax_level_equal_or_lower = {
            value = 4
        }
    }
    OR = {
        is_player = no
    }
    OR = {
        always = yes
        $id$ = 0
    }
}

lroai_evaluate_building_railway = {
    trigger_if = {
        limit = {
            OR = {
                $priority$ = 1
                $priority$ = 5
            }
        }
        lroai_consider_building = {
            id = 4
            shortage = 1
        }
    }
    trigger_else_if = {
        limit = {
            OR = {
                $priority$ = 9
                $priority$ = 16
            }
        }
        lroai_consider_building = {
            id = 4
            shortage = 1
        }
    }
    trigger_else = {
        always = no
    }
    switch = {
        trigger = $priority$
        1 = {
            any_scope_state = {
                lroai_sanction_infrastructure = {
                    key = building_railway 
                    conditions = 0
                    shortage = 1
                    profitable = 0
                }
                lroai_infrastructure_balance_percent < lroai_infrastructure_4
            }
        }
        5 = {
            any_scope_state = {
                lroai_sanction_infrastructure = {
                    key = building_railway 
                    conditions = 0
                    shortage = 1
                    profitable = 0
                }
                lroai_infrastructure_balance_percent < lroai_infrastructure_5
            }
        }
        9 = {
            market.mg:transportation.lroai_supply_vs_demand_level >= 5
        }
        16 = {
            market.mg:transportation.lroai_supply_vs_demand_level >= 9
        }
    }
}

lroai_sanction_building_railway = {
    lroai_sanction_infrastructure = {
        key = building_railway 
        conditions = 0
        shortage = 1
        profitable = 0
    }
    OR = {
        lroai_infrastructure_balance_percent < lroai_infrastructure_5
        root.lroai_building_type_$id$_collected_data_1 >= 9
    }
    OR = {
        lroai_infrastructure_balance_percent < lroai_infrastructure_6
        root.lroai_building_type_$id$_collected_data_1 >= 16
    }
}

lroai_allocate_building_railway = {
    switch = {
        trigger = $aptitude$
        1 = {
            lroai_infrastructure_balance_percent < lroai_infrastructure_1
        }
        2 = {
            lroai_infrastructure_balance_percent < lroai_infrastructure_2
        }
        3 = {
            lroai_infrastructure_balance_percent < lroai_infrastructure_3
        }
        4 = {
            lroai_infrastructure_balance_percent < lroai_infrastructure_4
        }
        5 = {
            lroai_infrastructure_balance_percent < lroai_infrastructure_5
        }
        6 = {
            lroai_infrastructure_balance_percent >= lroai_infrastructure_5
            lroai_infrastructure_balance_percent < lroai_infrastructure_6
        }
        7 = {
            lroai_infrastructure_balance_percent >= lroai_infrastructure_6
            lroai_infrastructure_balance_percent < lroai_infrastructure_7
        }
        fallback = {
            always = no
        }
    }
}

# ----
# Port
# ----

lroai_consider_building_port = {
    has_technology_researched = navigation
    lroai_building_is_allowed = {
        critical = 5 # Can be constructed as critical, 5 is id of building type
    }
    any_scope_state = {
        is_coastal = yes
    }
    OR = {
        is_player = no
    }
    OR = {
        always = yes
        $id$ = 0
    }
}

lroai_evaluate_building_port = {
    
    trigger_if = {
        limit = {
            $priority$ >= 1
            $priority$ <= 10
            OR = {
                NOT = {
                    has_variable = lroai_building_port_cooldown
                }
                $priority$ = 1
            }
        }

        trigger_if = {
            limit = {
                $priority$ = 1
            }
            always = yes
        }
        trigger_else_if = {
            limit = {
                $priority$ >= 2
                $priority$ <= 3
            }
            trigger_if = {
                limit = {
                    lroai_are_military_expenses_higher_than_usual = no
                }
                OR = {
                    lroai_budget_health_is_equal_or_higher = {
                        level = -1
                    }
                    lroai_tax_level_equal_or_lower = {
                        value = 3
                    }
                }
            }
            trigger_else = {
                OR = {
                    lroai_budget_health_is_equal_or_higher = {
                        level = 0
                    }
                    lroai_tax_level_equal_or_lower = {
                        value = 2
                    }
                }
            }
            lroai_building_port_spending_value < lroai_building_port_spending_excess
            lroai_building_port_spending_expected < lroai_building_port_spending_ceiling
            lroai_convoys_current < lroai_convoys_excess
        }
        trigger_else_if = {
            limit = {
                $priority$ >= 4
            }
            OR = {
                lroai_budget_health_is_equal_or_higher = {
                    level = 0
                }
                lroai_tax_level_equal_or_lower = {
                    value = 2
                }
            }
            lroai_building_port_spending_value < lroai_building_port_spending_target
            lroai_building_port_spending_expected < lroai_building_port_spending_excess
            lroai_convoys_current < lroai_convoys_target
        }
        
        trigger_if = {
            limit = {
                $priority$ = 1
            }
            lroai_consider_building = {
                id = 5
                shortage = 0
            }
        }
        trigger_else_if = {
            limit = {
                $priority$ >= 2
            }
            lroai_consider_building = {
                id = 5
                shortage = 1
            }
        }
        
        switch = {
            trigger = $priority$
            1 = {
                OR = {
                    AND = {
                        lroai_has_variable_list = {
                            name = lroai_states_of_market_capital_coastline
                        }
                        lroai_overseas_connections_are_required = yes
                        NOT = {
                            any_in_list = {
                                variable = lroai_states_of_market_capital_coastline
                                lroai_has_building = {
                                    key = building_port
                                }
                            }
                        }
                        any_in_list = {
                            variable = lroai_states_of_market_capital_coastline
                            lroai_sanction_building_port = {
                                id = 5
                            }
                            lroai_sanction_infrastructure = {
                                key = building_port
                                conditions = 1
                                shortage = 0
                                profitable = 0
                            }
                        }
                    }
                    any_scope_state = {
                        is_isolated_from_market = yes
                        lroai_sanction_building_port = {
                            id = 5
                        }
                        lroai_sanction_infrastructure = {
                            key = building_port
                            conditions = 1
                            shortage = 0
                            profitable = 0
                        }
                    }
                }
            }
            2 = {
                lroai_has_variable_list = {
                    name = lroai_states_of_market_capital_coastline
                }
                lroai_overseas_connections_are_required = yes
                any_in_list = {
                    variable = lroai_states_of_market_capital_coastline
                    lroai_has_building = {
                        key = building_port
                    }
                    count < lroai_ports_on_market_capital_coastline
                }
                any_in_list = {
                    variable = lroai_states_of_market_capital_coastline
                    lroai_sanction_building_port = {
                        id = 5
                    }
                    lroai_sanction_infrastructure = {
                        key = building_port
                        conditions = 1
                        shortage = 1
                        profitable = 0
                    }
                }
            }
            3 = {
                any_country = {
                    NOT = {
                        this = root
                    }
                    market.owner = root
                    any_scope_state = {
                        is_coastal = yes
                        infrastructure >= infrastructure_usage
                        market_access < 1
                        any_scope_building = {
                            is_building_type = building_port
                            level > 0
                        }
                    }
                }
            }
            4 = {
                any_scope_state = {
                    lroai_infrastructure_balance_percent < lroai_infrastructure_5
                    lroai_sanction_building_port = {
                        id = 5
                    }
                    lroai_sanction_infrastructure = {
                        key = building_port
                        conditions = 0
                        shortage = 1
                        profitable = 0
                    }
                }
            }
            5 = {
                lroai_convoys_current < lroai_convoys_5
            }
            6 = {
                lroai_convoys_current < lroai_convoys_6
            }
            7 = {
                lroai_convoys_current < lroai_convoys_7
            }
            8 = {
                lroai_convoys_current < lroai_convoys_8
            }
            9 = {
                lroai_convoys_current < lroai_convoys_9
            }
            10 = {
                lroai_convoys_current < lroai_convoys_10
            }
            11 = {
                lroai_convoys_current < lroai_convoys_11
            }
            12 = {
                lroai_convoys_current < lroai_convoys_12
            }
            fallback = {
                always = no
            }
        }
    }
    trigger_else = {
        always = no
    }
}

lroai_sanction_building_port = {
    is_coastal = yes
    var:lroai_building_port_level < lroai_state_port_limit
    OR = {
        always = yes
        $id$ = 0
    }
}

lroai_allocate_building_port = {
    switch = {
        trigger = $aptitude$
        1 = {
            root = {
                lroai_building_type_5_collected_data_1 = 1
                lroai_has_variable_list = {
                    name = lroai_states_of_market_capital_coastline
                }
                lroai_overseas_connections_are_required = yes
                NOT = {
                    any_in_list = {
                        variable = lroai_states_of_market_capital_coastline
                        lroai_has_building = {
                            key = building_port
                        }
                    }
                }
                is_target_in_variable_list = {
                    name = lroai_states_of_market_capital_coastline
                    target = prev
                }
            }
            OR = {
                this = root.market_capital
                root.market_capital = {
                    lroai_has_building = {
                        key = building_port
                    }
                }
                root.market_capital = {
                    is_coastal = no
                }
                NOT = {
                    root.market_capital.owner = root
                }
            }
            lroai_sanction_infrastructure = {
                key = building_port
                conditions = 1
                shortage = 0
                profitable = 0
            }
        }
        2 = {
            root.lroai_building_type_5_collected_data_1 = 1
            is_isolated_from_market = yes
            lroai_sanction_infrastructure = {
                key = building_port
                conditions = 1
                shortage = 0
                profitable = 0
            }
        }
        3 = {
            root = {
                lroai_building_type_5_collected_data_1 = 2
                is_target_in_variable_list = {
                    name = lroai_states_of_market_capital_coastline
                    target = prev
                }
            }
            OR = {
                this = root.market_capital
                root.market_capital = {
                    lroai_has_building = {
                        key = building_port
                    }
                }
                root.market_capital = {
                    is_coastal = no
                }
                NOT = {
                    root.market_capital.owner = root
                }
            }
            lroai_sanction_infrastructure = {
                key = building_port
                conditions = 1
                shortage = 1
                profitable = 0
            }
        }
        4 = {
            root.lroai_building_type_5_collected_data_1 >= 3
            lroai_infrastructure_balance_percent < lroai_infrastructure_5
            NOT = {
                any_scope_building = {
                    is_building_type = building_port
                    level > 0
                    has_active_production_method = pm_anchorage
                }
            }
            lroai_sanction_infrastructure = {
                key = building_port 
                conditions = 0
                shortage = 1
                profitable = 0
            }
        }
        5 = {
            root.lroai_building_type_5_collected_data_1 >= 3
            lroai_infrastructure_balance_percent >= lroai_infrastructure_5
            NOT = {
                any_scope_building = {
                    is_building_type = building_port
                    level > 0
                    has_active_production_method = pm_anchorage
                }
            }
            lroai_sanction_infrastructure = {
                key = building_port 
                conditions = 0
                shortage = 1
                profitable = 0
            }
        }
        fallback = {
            always = no
        }
    }
}

# --------
# Barracks
# --------

lroai_consider_building_barracks = {
    has_technology_researched = standing_army
    lroai_building_is_allowed = {
        critical = 0
    }
    OR = {
        lroai_budget_health_is_equal_or_higher = {
            level = -1
        }
        lroai_tax_level_equal_or_lower = {
            value = 3
        }
    }
    trigger_if = {
        limit = {
            var:lroai_building_barracks_total < lroai_battalion_paucity
        }
        lroai_consider_building = {
            id = $id$
            shortage = 0
        }
    }
    trigger_else = {
        lroai_consider_building = {
            id = $id$
            shortage = 1
        }
    }
    OR = {
        var:lroai_building_barracks_total < lroai_battalion_floor
        AND = {
            lroai_building_barracks_spending_value < lroai_building_barracks_spending_target
            lroai_building_barracks_spending_expected < lroai_building_barracks_spending_excess
        }
    }
    OR = {
        is_player = no
    }
}

lroai_evaluate_building_barracks = {
    trigger_if = {
        limit = {
            $priority$ >= 2
            $priority$ <= 10
            OR = {
                NOT = {
                    has_variable = lroai_building_barracks_cooldown
                }
                NOR = {
                    $priority$ > 5
                    lroai_building_barracks_spending_expected > lroai_building_barracks_spending_target
                }
            }
        }
        switch = {
            trigger = $priority$
            2 = {
                var:lroai_building_barracks_total < lroai_battalion_1
            }
            3 = {
                var:lroai_building_barracks_total < lroai_battalion_2
            }
            4 = {
                var:lroai_building_barracks_total < lroai_battalion_3
            }
            5 = {
                var:lroai_building_barracks_total < lroai_battalion_4
            }
            6 = {
                var:lroai_building_barracks_total < lroai_battalion_5
            }
            7 = {
                var:lroai_building_barracks_total < lroai_battalion_6
            }
            8 = {
                var:lroai_building_barracks_total < lroai_battalion_7
            }
            9 = {
                var:lroai_building_barracks_total < lroai_battalion_8
            }
            10 = {
                var:lroai_building_barracks_total < lroai_battalion_9
            }
            fallback = {
                always = no
            }
        }
    }
    trigger_else = {
        always = no
    }
}

lroai_sanction_building_barracks = {
    var:lroai_building_barracks_level < lroai_state_barracks_limit
    lroai_sanction_infrastructure = {
        key = building_barracks
        conditions = 0
        shortage = 1
        profitable = 0
    }
    OR = {
        always = yes
        $id$ = 0
    }
}

lroai_allocate_building_barracks = {
    switch = {
        trigger = $aptitude$
        1 = {
            lroai_has_non_discriminated_homelanders = yes
        }
        2 = {
            lroai_has_non_discriminated_homelanders = no
        }
        fallback = {
            always = no
        }
    }
}

# ----------
# Naval base
# ----------

lroai_consider_building_naval_base = {
    has_technology_researched = admiralty
    lroai_building_is_allowed = {
        critical = 0
    }
    OR = {
        lroai_budget_health_is_equal_or_higher = {
            level = -1
        }
        lroai_tax_level_equal_or_lower = {
            value = 3
        }
    }
    trigger_if = {
        limit = {
            var:lroai_building_barracks_total < lroai_flotilla_paucity
        }
        lroai_consider_building = {
            id = $id$
            shortage = 0
        }
    }
    trigger_else = {
        lroai_consider_building = {
            id = $id$
            shortage = 1
        }
    }
    any_scope_state = {
        is_coastal = yes
    }
    OR = {
        navy_size < lroai_flotilla_floor
        AND = {
            lroai_building_naval_base_spending_value < lroai_building_naval_base_spending_target
            lroai_building_naval_base_spending_expected < lroai_building_naval_base_spending_excess
        }
    }
    OR = {
        is_player = no
    }
}

lroai_evaluate_building_naval_base = {
    trigger_if = {
        limit = {
            $priority$ >= 2
            $priority$ <= 10
            OR = {
                NOT = {
                    has_variable = lroai_building_naval_base_cooldown
                }
                NOR = {
                    $priority$ > 5
                    lroai_building_naval_base_spending_expected > lroai_building_naval_base_spending_target
                }
            }
        }
        switch = {
            trigger = $priority$
            2 = {
                navy_size < lroai_flotilla_1
            }
            3 = {
                navy_size < lroai_flotilla_2
            }
            4 = {
                navy_size < lroai_flotilla_3
            }
            5 = {
                navy_size < lroai_flotilla_4
            }
            6 = {
                navy_size < lroai_flotilla_5
            }
            7 = {
                navy_size < lroai_flotilla_6
            }
            8 = {
                navy_size < lroai_flotilla_7
            }
            9 = {
                navy_size < lroai_flotilla_8
            }
            10 = {
                navy_size < lroai_flotilla_9
            }
            fallback = {
                always = no
            }
        }
    }
    trigger_else = {
        always = no
    }
}

lroai_sanction_building_naval_base = {
    is_coastal = yes
    var:lroai_building_naval_base_level < lroai_state_naval_base_limit
    lroai_sanction_infrastructure = {
        key = building_naval_base
        conditions = 0
        shortage = 1
        profitable = 0
    }
    OR = {
        always = yes
        $id$ = 0
    }
}

lroai_allocate_building_naval_base = {
    switch = {
        trigger = $aptitude$
        1 = {
            lroai_has_non_discriminated_homelanders = yes
        }
        2 = {
            lroai_has_non_discriminated_homelanders = no
        }
        fallback = {
            always = no
        }
    }
}

# ------------
# Logging camp
# ------------

lroai_consider_building_logging_camp = {
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_logging_camp = {
    lroai_sanction_resource = {
        key = building_logging_camp
        id = $id$
        resource = bg_logging
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_logging_camp = {
    lroai_allocate_resource = {
        good = g:wood
        aptitude = $aptitude$
    }
}

# -------------
# Fishing wharf
# -------------

lroai_consider_building_fishing_wharf = {
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_fishing_wharf = {
    lroai_sanction_resource = {
        key = building_fishing_wharf
        id = $id$
        resource = bg_fishing
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_fishing_wharf = {
    lroai_allocate_resource = {
        good = g:fish 
        aptitude = $aptitude$
    }
}

# ---------------
# Whaling station
# ---------------

lroai_consider_building_whaling_station = {
    has_technology_researched = navigation
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_whaling_station = {
    lroai_sanction_resource = {
        key = building_whaling_station
        id = $id$
        resource = bg_whaling
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_whaling_station = {
    lroai_allocate_resource = {
        good = g:oil
        aptitude = $aptitude$
    }
}

# -----------------
# Rubber plantation
# -----------------

lroai_consider_building_rubber_plantation = {
    has_technology_researched = rubber_mastication
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_rubber_plantation = {
    lroai_sanction_resource = {
        key = building_rubber_plantation
        id = $id$
        resource = bg_rubber
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_rubber_plantation = {
    lroai_allocate_resource = {
        good = g:rubber
        aptitude = $aptitude$
    }
}

# -------
# Oil rig
# -------

lroai_consider_building_oil_rig = {
    has_technology_researched = pumpjacks
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_oil_rig = {
    lroai_sanction_resource = {
        key = building_oil_rig
        id = $id$
        resource = bg_oil_extraction
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_oil_rig = {
    lroai_allocate_resource = {
        good = g:oil
        aptitude = $aptitude$
    }
}

# ---------
# Coal mine
# ---------

lroai_consider_building_coal_mine = {
    has_technology_researched = shaft_mining
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_coal_mine = {
    lroai_sanction_resource = {
        key = building_coal_mine
        id = $id$
        resource = bg_coal_mining
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_coal_mine = {
    lroai_allocate_resource = {
        good = g:coal
        aptitude = $aptitude$
    }
}

# ---------
# Iron mine
# ---------

lroai_consider_building_iron_mine = {
    has_technology_researched = shaft_mining
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_iron_mine = {
    lroai_sanction_resource = {
        key = building_iron_mine
        id = $id$
        resource = bg_iron_mining
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_iron_mine = {
    lroai_allocate_resource = {
        good = g:iron
        aptitude = $aptitude$
    }
}

# ---------
# Lead mine
# ---------

lroai_consider_building_lead_mine = {
    has_technology_researched = shaft_mining
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_lead_mine = {
    lroai_sanction_resource = {
        key = building_lead_mine
        id = $id$
        resource = bg_lead_mining
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_lead_mine = {
    lroai_allocate_resource = {
        good = g:lead
        aptitude = $aptitude$
    }
}

# -----------
# Sulfur mine
# -----------

lroai_consider_building_sulfur_mine = {
    has_technology_researched = shaft_mining
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_sulfur_mine = {
    lroai_sanction_resource = {
        key = building_sulfur_mine
        id = $id$
        resource = bg_sulfur_mining
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_sulfur_mine = {
    lroai_allocate_resource = {
        good = g:sulfur
        aptitude = $aptitude$
    }
}

# ---------
# Gold mine
# ---------

lroai_consider_building_gold_mine = {
    has_technology_researched = shaft_mining
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_gold_mine = {
    lroai_sanction_resource = {
        key = building_gold_mine
        id = $id$
        resource = bg_gold_mining
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_gold_mine = {
    lroai_allocate_resource = {
        good = g:gold
        aptitude = $aptitude$
    }
}

# --------
# Rye farm
# --------

lroai_consider_building_rye_farm = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_rye_farm = {
    lroai_sanction_agriculture = {
        key = building_rye_farm
        id = $id$
        resource = bg_rye_farms
        cipher = 1
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_rye_farm = {
    lroai_allocate_agriculture = {
        good = g:grain
        aptitude = $aptitude$
    }
}

# ----------
# Wheat farm
# ----------

lroai_consider_building_wheat_farm = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_wheat_farm = {
    lroai_sanction_agriculture = {
        key = building_wheat_farm
        id = $id$
        resource = bg_wheat_farms
        cipher = 2
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_wheat_farm = {
    lroai_allocate_agriculture = {
        good = g:grain
        aptitude = $aptitude$
    }
}

# ---------
# Rice farm
# ---------

lroai_consider_building_rice_farm = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_rice_farm = {
    lroai_sanction_agriculture = {
        key = building_rice_farm
        id = $id$
        resource = bg_rice_farms
        cipher = 3
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_rice_farm = {
    lroai_allocate_agriculture = {
        good = g:grain
        aptitude = $aptitude$
    }
}

# ----------
# Maize farm
# ----------

lroai_consider_building_maize_farm = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_maize_farm = {
    lroai_sanction_agriculture = {
        key = building_maize_farm
        id = $id$
        resource = bg_maize_farms
        cipher = 4
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_maize_farm = {
    lroai_allocate_agriculture = {
        good = g:grain
        aptitude = $aptitude$
    }
}

# -----------
# Millet farm
# -----------

lroai_consider_building_millet_farm = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_millet_farm = {
    lroai_sanction_agriculture = {
        key = building_millet_farm
        id = $id$
        resource = bg_millet_farms
        cipher = 5
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_millet_farm = {
    lroai_allocate_agriculture = {
        good = g:grain
        aptitude = $aptitude$
    }
}

# ---------------
# Livestock ranch
# ---------------

lroai_consider_building_livestock_ranch = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_livestock_ranch = {
    lroai_sanction_agriculture = {
        key = building_livestock_ranch
        id = $id$
        resource = bg_livestock_ranches
        cipher = 10
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_livestock_ranch = {
    lroai_allocate_agriculture = {
        good = g:fabric
        aptitude = $aptitude$
    }
}

# -----------------
# Cotton plantation
# -----------------

lroai_consider_building_cotton_plantation = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_cotton_plantation = {
    lroai_sanction_agriculture = {
        key = building_cotton_plantation
        id = $id$
        resource = bg_cotton_plantations
        cipher = 20
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_cotton_plantation = {
    lroai_allocate_agriculture = {
        good = g:fabric
        aptitude = $aptitude$
    }
}

# --------------
# Dye plantation
# --------------

lroai_consider_building_dye_plantation = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_dye_plantation = {
    lroai_sanction_agriculture = {
        key = building_dye_plantation
        id = $id$
        resource = bg_dye_plantations
        cipher = 100
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_dye_plantation = {
    lroai_allocate_agriculture = {
        good = g:dye
        aptitude = $aptitude$
    }
}

# ---------------
# Silk plantation
# ---------------

lroai_consider_building_silk_plantation = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_silk_plantation = {
    lroai_sanction_agriculture = {
        key = building_silk_plantation
        id = $id$
        resource = bg_silk_plantations
        cipher = 200
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_silk_plantation = {
    lroai_allocate_agriculture = {
        good = g:silk
        aptitude = $aptitude$
    }
}

# -----------------
# Banana plantation
# -----------------

lroai_consider_building_banana_plantation = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_banana_plantation = {
    lroai_sanction_agriculture = {
        key = building_banana_plantation
        id = $id$
        resource = bg_banana_plantations
        cipher = 1000
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_banana_plantation = {
    lroai_allocate_agriculture = {
        good = g:fruit
        aptitude = $aptitude$
    }
}

# ----------------
# Sugar plantation
# ----------------

lroai_consider_building_sugar_plantation = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_sugar_plantation = {
    lroai_sanction_agriculture = {
        key = building_sugar_plantation
        id = $id$
        resource = bg_sugar_plantations
        cipher = 2000
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_sugar_plantation = {
    lroai_allocate_agriculture = {
        good = g:sugar
        aptitude = $aptitude$
    }
}

# --------------
# Tea plantation
# --------------

lroai_consider_building_tea_plantation = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_tea_plantation = {
    lroai_sanction_agriculture = {
        key = building_tea_plantation
        id = $id$
        resource = bg_tea_plantations
        cipher = 10000
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_tea_plantation = {
    lroai_allocate_agriculture = {
        good = g:tea
        aptitude = $aptitude$
    }
}

# -----------------
# Coffee plantation
# -----------------

lroai_consider_building_coffee_plantation = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_coffee_plantation = {
    lroai_sanction_agriculture = {
        key = building_coffee_plantation
        id = $id$
        resource = bg_coffee_plantations
        cipher = 20000
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_coffee_plantation = {
    lroai_allocate_agriculture = {
        good = g:coffee
        aptitude = $aptitude$
    }
}

# ------------------
# Tobacco plantation
# ------------------

lroai_consider_building_tobacco_plantation = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_tobacco_plantation = {
    lroai_sanction_agriculture = {
        key = building_tobacco_plantation
        id = $id$
        resource = bg_tobacco_plantations
        cipher = 100000
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_tobacco_plantation = {
    lroai_allocate_agriculture = {
        good = g:tobacco
        aptitude = $aptitude$
    }
}

# ----------------
# Opium plantation
# ----------------

lroai_consider_building_opium_plantation = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
    NOT = {
        is_banning_goods = g:opium
    }
}

lroai_sanction_building_opium_plantation = {
    lroai_sanction_agriculture = {
        key = building_opium_plantation
        id = $id$
        resource = bg_opium_plantations
        cipher = 200000
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_opium_plantation = {
    lroai_allocate_agriculture = {
        good = g:opium
        aptitude = $aptitude$
    }
}

# -------------
# Food industry
# -------------

lroai_consider_building_food_industry = {
    has_technology_researched = manufacturies
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_food_industry = {
    lroai_sanction_industry = {
        key = building_food_industry
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_food_industry = {
    $aptitude$ = 1
}

# -------------
# Textile mills
# -------------

lroai_consider_building_textile_mills = {
    has_technology_researched = manufacturies
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_textile_mills = {
    lroai_sanction_industry = {
        key = building_textile_mills
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_textile_mills = {
    $aptitude$ = 1
}

# -----------------------
# Furniture manufacturies
# -----------------------

lroai_consider_building_furniture_manufacturies = {
    has_technology_researched = manufacturies
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_furniture_manufacturies = {
    lroai_sanction_industry = {
        key = building_furniture_manufacturies
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_furniture_manufacturies = {
    $aptitude$ = 1
}

# ----------
# Glassworks
# ----------

lroai_consider_building_glassworks = {
    has_technology_researched = manufacturies
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_glassworks = {
    lroai_sanction_industry = {
        key = building_glassworks
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_glassworks = {
    $aptitude$ = 1
}

# -----------------
# Tooling workshops
# -----------------

lroai_consider_building_tooling_workshops = {
    has_technology_researched = manufacturies
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_tooling_workshops = {
    lroai_sanction_industry = {
        key = building_tooling_workshops
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_tooling_workshops = {
    $aptitude$ = 1
}

# -----------
# Paper mills
# -----------

lroai_consider_building_paper_mills = {
    has_technology_researched = manufacturies
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_paper_mills = {
    lroai_sanction_industry = {
        key = building_paper_mills
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_paper_mills = {
    $aptitude$ = 1
}

# ---------------
# Chemical plants
# ---------------

lroai_consider_building_chemical_plants = {
    has_technology_researched = intensive_agriculture
    NOT = {
        has_law = law_type:law_industry_banned
    }
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_chemical_plants = {
    lroai_sanction_industry = {
        key = building_chemical_plants
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_chemical_plants = {
    $aptitude$ = 1
}

# ----------------
# Synthetic plants
# ----------------

lroai_consider_building_synthetics_plants = {
    has_technology_researched = aniline
    NOT = {
        has_law = law_type:law_industry_banned
    }
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_synthetics_plants = {
    lroai_sanction_industry = {
        key = building_synthetics_plants
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_synthetics_plants = {
    $aptitude$ = 1
}

# -----------
# Steel mills
# -----------

lroai_consider_building_steel_mills = {
    has_technology_researched = steelworking
    NOT = {
        has_law = law_type:law_industry_banned
    }
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_steel_mills = {
    lroai_sanction_industry = {
        key = building_steel_mills
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_steel_mills = {
    $aptitude$ = 1
}

# --------------
# Motor industry
# --------------

lroai_consider_building_motor_industry = {
    has_technology_researched = atmospheric_engine
    NOT = {
        has_law = law_type:law_industry_banned
    }
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_motor_industry = {
    lroai_sanction_industry = {
        key = building_motor_industry
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_motor_industry = {
    $aptitude$ = 1
}

# ---------
# Shipyards
# ---------

lroai_consider_building_shipyards = {
    has_technology_researched = navigation
    any_scope_state = {
        is_coastal = yes
    }
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_shipyards = {
    is_coastal = yes
    lroai_sanction_industry = {
        key = building_shipyards
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_shipyards = {
    $aptitude$ = 1
}

# -----------
# Power plant
# -----------

lroai_consider_building_power_plant = {
    has_technology_researched = electrical_generation
    NOT = {
        has_law = law_type:law_industry_banned
    }
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_power_plant = {
    lroai_sanction_industry = {
        key = building_power_plant
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_power_plant = {
    $aptitude$ = 1
}

# ------------------
# Electrics industry
# ------------------

lroai_consider_building_electrics_industry = {
    has_technology_researched = telephone
    NOT = {
        has_law = law_type:law_industry_banned
    }
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_electrics_industry = {
    lroai_sanction_industry = {
        key = building_electrics_industry
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_electrics_industry = {
    $aptitude$ = 1
}

# -------------
# Arms industry
# -------------

lroai_consider_building_arms_industry = {
    has_technology_researched = gunsmithing
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_arms_industry = {
    lroai_sanction_industry = {
        key = building_arms_industry
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_arms_industry = {
    $aptitude$ = 1
}

# ---------------
# Munition plants
# ---------------

lroai_consider_building_munition_plants = {
    has_technology_researched = percussion_cap
    NOT = {
        has_law = law_type:law_industry_banned
    }
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_munition_plants = {
    lroai_sanction_industry = {
        key = building_munition_plants
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_munition_plants = {
    $aptitude$ = 1
}

# --------------------
# War machine industry
# --------------------

lroai_consider_building_war_machine_industry = {
    has_technology_researched = military_aviation
    NOT = {
        has_law = law_type:law_industry_banned
    }
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_war_machine_industry = {
    lroai_sanction_industry = {
        key = building_war_machine_industry
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_war_machine_industry = {
    $aptitude$ = 1
}

lroai_is_using_compatibility_patches = {
    lroai_has_global_variable_list = {
        name = lroai_compatibility_patches
    }
}

# ------------
# Arts academy
# ------------

lroai_consider_building_arts_academy = {
    has_technology_researched = romanticism
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_arts_academy = {
    lroai_sanction_industry = {
        key = building_arts_academy
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_arts_academy = {
    $aptitude$ = 1
}

#
#  NEW IN 1.5
#


# ------------
# Explosives factory
# ------------

lroai_consider_building_explosives_factory = {
    has_technology_researched = intensive_agriculture
    NOT = {
        has_law = law_type:law_industry_banned
    }
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_explosives_factory = {
    lroai_sanction_industry = {
        key = building_explosives_factory
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_explosives_factory = {
    $aptitude$ = 1
}

# ---------
# Military shipyards
# ---------

lroai_consider_building_military_shipyards = {
    has_technology_researched = navigation
    any_scope_state = {
        is_coastal = yes
    }
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_military_shipyards = {
    is_coastal = yes
    lroai_sanction_industry = {
        key = building_military_shipyards
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_military_shipyards = {
    $aptitude$ = 1
}


# -------------
# Artillery foundries
# -------------

lroai_consider_building_artillery_foundries = {
    has_technology_researched = gunsmithing
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_artillery_foundries = {
    lroai_sanction_industry = {
        key = building_artillery_foundries
        id = $id$
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_artillery_foundries = {
    $aptitude$ = 1
}

# ----------
# Vineyard plantation
# ----------

lroai_consider_building_vineyard_plantation = {
    has_technology_researched = enclosure
    lroai_building_is_allowed = {
        critical = 0
    }
    lroai_consider_building = {
        id = $id$
        shortage = 1
    }
}

lroai_sanction_building_vineyard_plantation = {
    lroai_sanction_agriculture = {
        key = building_vineyard_plantation
        id = $id$
        resource = bg_vineyard_plantation
        cipher = 2
        conditions = 0
        shortage = 1
        profitable = 1
    }
}

lroai_allocate_building_vineyard_plantation = {
    lroai_allocate_agriculture = {
        good = g:vine
        aptitude = $aptitude$
    }
}
